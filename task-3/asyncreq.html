<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <input class="input-data" type="text" placeholder="Введите любое число" value="">
    <input class="input-btn" type="button" value="SEND">
    <br>
    <br>
    <span>Результат запроса</span>
    <hr>
    <div class="gallery"></div>

    <script>

        function useRequest(callback) {
            const inpData = +document.querySelector('.input-data').value;

            //console.log(inpData);
            if (inpData < 1 || inpData > 10) {
                const alertMsg = "число вне диапазона от 1 до 10"
                return resultNode.innerText = alertMsg;
            } else {

                const reqUrl = `https://jsonplaceholder.typicode.com/photos?_limit=${inpData}`;

                var xhr = new XMLHttpRequest();
                xhr.open('GET', reqUrl, true);

                xhr.onload = function () {
                    if (xhr.status != 200) {
                        console.log('Статус ответа: ', xhr.status);
                    } else {
                        const result = JSON.parse(xhr.response);
                        if (callback) {

                            let msg = xhr.status == 200 ? "Ответ от сервера получен" : "";
                            resultNode.innerText = msg;
                            setTimeout(callback, 1000, result);
                        }
                    }
                };

                xhr.onerror = function () {
                    console.log('Ошибка! Статус ответа: ', xhr.status);
                };

                xhr.send();
            }
        };

        // Ищем ноду для вставки результата запроса
        const resultNode = document.querySelector('.gallery');
        // Ищем кнопку, по нажатии на которую будет запрос
        const btnNode = document.querySelector('.input-btn');

        /**
          * Функция обработки полученного результата
          * apiData - объект с результатом запроса
          */
        function displayResult(apiData) {
            let cards = '';
            // console.log('start cards', cards);

            apiData.forEach(item => {
                const cardBlock = `
                                    <div class="card">
                                        <img
                                        src="${item.thumbnailUrl}"
                                        class="card-image"
                                        />
                                        <p>${item.title}</p>
                                    </div>
                                    `;
                cards += cardBlock;
            });

            // console.log('end cards', cards);

            resultNode.innerHTML = cards;
        }

        // Вешаем обработчик на кнопку для запроса
        btnNode.addEventListener('click', () => {
            useRequest(displayResult);
        })

    </script>
</body>

</html>